<main class="bg-gray-50/50 flex flex-row ">
  <div class="p-1 flex flex-col w-full">
    <div class="mt-1">
      <div class="p-1 flex justify-between content-between">
        <h6 class="text-3xl">Productos</h6>
        <input [value]="searchControl.value" (input)="searchControl && searchControl.setValue($event.target.value)"
          type="text" placeholder="Buscar producto..."
          class="w-1/4 px-4 py-2 border border-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-grey-700 transition duration-150 text-gray-400 input-mayusculas">
        <button type="button" (click)="openModalNewProduct()"
          class="w-1/4 focus:outline-none text-white hover:bg-green-800 focus:ring-green-300 font-medium rounded-lg text-md px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-900 px-8">
          + Crear Nuevo Producto
        </button>
      </div>
      <div
        class="relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 shadow-md overflow-hidden xl:col-span-2">
        <div class="p-1 overflow-x-scroll px-0 pt-0 pb-1">
          <table class="w-full table-auto">
            <thead>
              <tr>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans font-bold uppercase text-blue-gray-400">
                    ID
                  </p>
                </th>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    NOMBRE
                  </p>
                </th>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    DESCRIPCION
                  </p>
                </th>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    CATEGORIA
                  </p>
                </th>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    PRECIO
                  </p>
                </th>
                <th class="border-b border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    ESTADO
                  </p>
                </th>
                <th class="border-blue-gray-50 py-3 px-6 text-left">
                  <p class="block antialiased font-sans uppercase text-blue-gray-400">
                    ACCIONES
                  </p>
                </th>
              </tr>
            </thead>
            <tbody>
              @for(product of paginatedItems; track product.ID){<tr>
                <td class="py-6 px-5 border-b border-blue-gray-50">
                  <div class="flex items-center ">
                    <p class="block antialiased font-sans leading-normal text-blue-gray-900 font-bold text-xl">
                      {{product.ID}}
                    </p>
                  </div>
                </td>
                <td class="py-3 px-5 border-b border-blue-gray-50">
                  <p class="block antialiased font-sans font-medium text-blue-gray-600 text-xl">
                    {{product.NOMBRE}}
                  </p>
                </td>
                <td class="py-3 px-5 border-b border-blue-gray-50">
                  <div class="w-10/12">
                    <p class="antialiased font-sans mb-1 block font-medium text-blue-gray-600 text-xl">
                      {{product.DESCRIPCION}}
                    </p>
                  </div>
                </td>
                <td class="py-3 px-5 border-b border-blue-gray-50">
                  <div class="w-10/12">
                    <p class="antialiased font-sans mb-1 block font-medium text-blue-gray-600 text-xl">
                      {{product.CATEGORIA}}
                    </p>
                  </div>
                </td>
                <td class="py-3 px-5 border-b border-blue-gray-50">
                  <div class="w-10/12">
                    <p class="antialiased font-sans mb-1 block font-medium text-blue-gray-600 text-xl">
                      {{product.PRECIO}}
                    </p>
                  </div>
                </td>
                <td class="py-3 px-5 border-b border-blue-gray-50">
                  <div class="w-10/12">
                    <p class="antialiased font-sans mb-1 block font-medium text-green-600 text-xl"
                      [ngClass]="{ 'text-red-600': !product?.ACTIVE }">
                      {{product?.ACTIVE ? "Activo": "Inactivo"}}
                    </p>
                  </div>
                </td>
                <button type="button" (click)="openModalDetail(product)"
                  class="text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700">
                  <svg class="w-[50px] h-[50px] text-gray-800 dark:text-white" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd"
                      d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z"
                      clip-rule="evenodd" />
                  </svg>
                </button>
                @if(product?.ACTIVE){
                <button type="button" (click)="updateStatusProduct(product.ID)"
                  class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                  <svg class="w-[50px] h-[50px] text-gray-800 dark:text-white" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                  </svg>
                </button>
                }@else if(!product?.ACTIVE){
                <button type="button" (click)="updateStatusProduct(product.ID)"
                  class="focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-900">
                  <svg class="w-[50px] h-[50px] text-gray-800 dark:text-white" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-width="2"
                      d="M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z" />
                    <path stroke="currentColor" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                  </svg>
                </button>}
                <button type="button" (click)="openModalEdit(product)"
                  class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                  <svg class="w-[50px] h-[50px] text-gray-800 dark:text-white" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd"
                      d="M14 4.182A4.136 4.136 0 0 1 16.9 3c1.087 0 2.13.425 2.899 1.182A4.01 4.01 0 0 1 21 7.037c0 1.068-.43 2.092-1.194 2.849L18.5 11.214l-5.8-5.71 1.287-1.31.012-.012Zm-2.717 2.763L6.186 12.13l2.175 2.141 5.063-5.218-2.141-2.108Zm-6.25 6.886-1.98 5.849a.992.992 0 0 0 .245 1.026 1.03 1.03 0 0 0 1.043.242L10.282 19l-5.25-5.168Zm6.954 4.01 5.096-5.186-2.218-2.183-5.063 5.218 2.185 2.15Z"
                      clip-rule="evenodd" />
                  </svg>
                </button>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="fixed bottom-1 left-80 right-0">
    </div>
    <div class="container bottom-1 mx-auto p-4 p-1 flex justify-between content-between">
      <!-- <div class="space-y-3 mb-6">
        @for(item of paginatedItems; track item.ID){<div
          class="p-4 bg-white border border-gray-200 rounded-lg shadow-sm">
          <p class="font-medium text-indigo-600">ID: {{ item.ID }}</p>
          <p class="text-gray-700">{{ item.NOMBRE }}</p>
        </div>}
      </div> -->
      @if(((currentPage - 1) * itemsPerPage + 9) > totalItems){
      <p class="mt-4 font-sans mb-1 block font-medium text-blue-gray-600 text-2xl">
        Mostrando {{ totalItems }} de {{ totalItems }} elementos.
      </p>
      }@else {
      <p class="font-sans mb-1 block font-medium text-blue-gray-600 text-2xl">
        Mostrando {{ (currentPage - 1) * itemsPerPage + 9 }} de {{ totalItems }} elementos.
      </p>
      }

      <nav class="flex justify-center items-center space-x-2">
        <button (click)="prevPage()" [disabled]="currentPage === 1"
          class="px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150 text-xl" [ngClass]="{
        'bg-indigo-100 text-indigo-700 hover:bg-indigo-200': currentPage > 1,
        'bg-gray-100 text-gray-400 cursor-not-allowed': currentPage === 1
      }">
          Anterior
        </button>
        <button *ngFor="let page of pageNumbers" (click)="goToPage(page)"
          class="w-10 h-10 text-sm font-medium rounded-full transition-colors duration-150" [ngClass]="{
        'bg-indigo-600 text-white shadow-md': page === currentPage,
        'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50': page !== currentPage
      }">
          {{ page }}
        </button>
        <button (click)="nextPage()" [disabled]="currentPage === totalPages"
          class="px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150" [ngClass]="{
        'bg-indigo-100 text-indigo-700 hover:bg-indigo-200': currentPage < totalPages,
        'bg-gray-100 text-gray-400 cursor-not-allowed': currentPage === totalPages
      }">
          Siguiente
        </button>
      </nav>
    </div>
  </div>

  <app-modal-details [isVisible]="showModalDetail" (close)="closeModalDetail()" [detailProduct]="producDetail" />
  <app-modal-edit [isVisible]="showModalEdit" (close)="recargarDatosPadre($event)" [detailProduct]="producDetail" />
  <app-modal-new-product [isVisible]="showModalNewProduct" (close)="recargarDatosPadreNewProduct($event)" />

</main>